<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
#div1{width:100px; height:100px; background:red; position:absolute;}
#div2{width:800px; height:600px; background:#ccc; position:relative;}

</style>
<script>
window.onload = function()
{
	var oDiv = document.getElementById('div1')
	var oDiv2 = document.getElementById('div2')
	var disx=0;
	var disy=0;
	
	oDiv.onmousedown = function(ev)
	{
		var oEvent= ev||event
		
		disx=oEvent.clientX-oDiv.offsetLeft
		disy=oEvent.clientY-oDiv.offsetTop
		
		document.onmousemove=function(ev)
		
		{
			var oEvent= ev||event
			var l=oEvent.clientX-disx
			var t=oEvent.clientY-disy
			
			if(l<50)
			{
				l=0
			}else if(l>oDiv2.offsetWidth-oDiv.offsetWidth-50)
			{
				l=oDiv2.offsetWidth-oDiv.offsetWidth
			}
			
			if(t<50)
			{
				t=0
			}else if(t>oDiv2.offsetHeight-oDiv.offsetHeight-50)
			{
				t=oDiv2.offsetHeight-oDiv.offsetHeight
			}
			
			oDiv.style.left=l+'px'
			oDiv.style.top=t+'px'
		}
		document.onmouseup = function()
		{
			document.onmousemove=null
			document.onmouseup=null
		}
		
		return false   //火狐bug
		
	}
}
</script>
</head>

<body>
<div  id="div2">
   <div id="div1"></div>
</div>   
</body>
</html>
