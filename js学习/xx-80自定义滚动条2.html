<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
#parent{width:600px; height:20px; background:#CCC; position:relative; margin:0 auto;}
#div1{width:20px; height:20px; background:red; position:absolute;top:0px; left:0px;}
#div2{width:300px; height:300px; background:green; filter:alpha(opactiy:0);opacity:0;}
</style>
<script>
window.onload= function()
{
	var oDiv1 = document.getElementById('div1')
	var oDiv2 = document.getElementById('div2')
	var oparent = document.getElementById('parent')
	
	oDiv1.onmousedown = function(ev)
	{
		var oEvent=ev||event
		var disx=oEvent.clientX-oDiv1.offsetLeft
		
		
		document.onmousemove= function(ev)
		{
			var oEvent=ev||event
			var l=oEvent.clientX-disx
			
			if(l<0)
			{
				l=0
			}else if(l>oparent.offsetWidth-oDiv1.offsetWidth)
			{
				l=oparent.offsetWidth-oDiv1.offsetWidth
			}
			
			
			
			oDiv1.style.left=l+'px'
			var scale=l/(oparent.offsetWidth-oDiv1.offsetWidth)
			document.title=scale
			oDiv2.style.filter='alpha(opacity:'+scale*100+')'
			oDiv2.style.opacity=scale
			
			
			
		}
		document.onmouseup=function()
		{
			document.onmousemove=null
			document.onmouseup=null
			
		}
		
		return false
		
	}
}
</script>
</head>

<body>
<div id="parent">
	<div id="div1"></div>
</div>
<div id="div2"></div>
</body>
</html>
